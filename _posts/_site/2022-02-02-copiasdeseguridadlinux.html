<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GVDYVWJLRH"></script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GVDYVWJLRH');
</script>

<p><strong>Copias incrementales</strong></p>

<p>Crea una carpeta llamada datos con tres ficheros con distintos contenidos:</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.001.png" alt="" /></p>

<p>Dentro de cada fichero le he puesto el nombre del mismo .</p>

<p><strong>Primer día</strong></p>

<p>Realiza una copia completa de esa carpeta con el comando tar (los ficheros lo vamos a ir numerando como si las copias la hiciéramos en distintos días, es decir el fichero resultante se llamaría copiacompleta1ddmmyyyy.tgz, donde ddmmyyyy es la fecha de la copia).</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.002.png" alt="" /></p>

<p><strong>Segundo día</strong></p>

<p>Modifica el fichero1.txt, borra el fichero2.txt y crea un nuevo fichero fichero4.txt. Realiza una copia incremental del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.003.png" alt="" /></p>

<p>Ahora haré la copia de incremental del directorio :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.004.png" alt="" /></p>

<p><strong>Tercer día</strong></p>

<p>Modifica el fichero3.txt y crea un nuevo fichero fichero5.txt. realiza un copia incremental del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.005.png" alt="" /></p>

<p>Y la copia incremental quedaría así :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.006.png" alt="" /></p>

<p><strong>Cuarto día</strong></p>

<p>Crea un directorio carpeta1 y dentro crea un nuevo fichero fichero6.txt. Realiza una copia incremental del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.007.png" alt="" /></p>

<p><strong>Quinto día</strong></p>

<p>Borra el fichero1.txt y renombre la carpeta a carpeta2. Realiza una copia incremental del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.008.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.009.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.010.png" alt="" /></p>

<p><strong>Sexto día</strong></p>

<p>Realiza otra copia completa del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.011.png" alt="" /></p>

<p><strong>Séptimo día</strong></p>

<p>Crea otro directorio carpeta3 y dentro el fichero fichero7.txt. Borra el fichero4.txt. Realiza una copia incremental del directorio</p>

<p>El fichero 6 ya esta en la  carpeta2 , así que en la carpeta3 he creado el fichero 7 .</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.012.png" alt="" /></p>

<p><strong>Octavo día</strong></p>

<p>Borra el fichero5.txt. Realiza una copia incremental del directorio</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.013.png" alt="" /></p>

<p><strong>Restauración</strong></p>

<p>Para ello deberemos de restaurar la completa y después la incremental . Yo lo haré sobre un directoria llamado datos .</p>

<p><strong>Octavo día:</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.014.png" alt="" />**</p>

<p><strong>Quinto día:</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.015.png" alt="" /></p>

<p><strong>Tercer día:</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.016.png" alt="" /></p>

<p><strong>Copias diferencial</strong></p>

<p>Vamos a repetir el mismo ejercicio pero ahora las copias serán así :</p>

<ul>
  <li>Primer día: Copia completa</li>
  <li>Segundo día: Copia diferencial</li>
  <li>Tercer día: Copia diferencial</li>
  <li>Cuarto día: Copia diferencial</li>
  <li>Quinto día: Copia diferencial</li>
  <li>Sexto día: Copia completa</li>
  <li>Séptimo día:Copia diferencial</li>
  <li>Octavo día:Copia diferencial</li>
</ul>

<p>Repetimos la misma estructura que el ejercicio anterior :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.017.png" alt="" /></p>

<p><strong>Primer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.018.png" alt="" /></p>

<p><strong>Segundo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.019.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.020.png" alt="" /></p>

<p><strong>Tercer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.021.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.022.png" alt="" /></p>

<p><strong>Cuarto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.023.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.024.png" alt="" /></p>

<p><strong>Quinto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.025.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.026.png" alt="" /></p>

<p><strong>Sexto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.027.png" alt="" /></p>

<p><strong>Séptimo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.028.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.029.png" alt="" /></p>

<p><strong>Octavo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.030.png" alt="" /></p>

<p><strong>Restauración Octavo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.031.png" alt="" /></p>

<p><strong>Quinto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.032.png" alt="" /></p>

<p><strong>Tercer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.033.png" alt="" /></p>

<p><strong>¿Ocupan más las copias diferenciales o las copias incrementales?</strong></p>

<p>Ocupan mas las diferenciales que las incrementales ya que  copia todos los datos nuevos o modificados desde la última copia completa.</p>

<p><strong>Copias mixtas</strong></p>

<p>Vamos a repetir el ejercicio, realizando las mismas modificaciones a los ficheros, pero realizando las siguientes copias:</p>

<ul>
  <li>Primer día: Copia completa</li>
  <li>Segundo día: Copia incremental</li>
  <li>Tercer día: Copia incremental</li>
  <li>Cuarto día: Copia diferencial</li>
  <li>Quinto día: Copia incremental</li>
  <li>Sexto día: Copia incremental</li>
  <li>Séptimo día: Copia diferencial</li>
  <li>Octavo día: Copia incremental</li>
</ul>

<p><strong>Primer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.034.png" alt="" /></p>

<p><strong>Segundo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.035.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.036.png" alt="" /></p>

<p><strong>Tercer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.037.png" alt="" /></p>

<p><strong>Cuarto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.038.png" alt="" /></p>

<p><strong>Quinto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.039.png" alt="" /></p>

<p><strong>Sexto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.040.png" alt="" /></p>

<p><strong>Séptimo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.041.png" alt="" /></p>

<p><strong>Octavo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.042.png" alt="" /></p>

<p><strong>Restauración Octavo día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.043.png" alt="" /></p>

<p><strong>Quinto día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.044.png" alt="" /></p>

<p><strong>Tercer día</strong></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.045.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.046.png" alt="" /></p>

<p><strong>Automatización de copias de seguridad utilizando cron</strong></p>

<p><strong>Ejercicio 1</strong></p>

<p>Busca información para crear 3 scripts en bash para crear una copia completa, incremental y diferencial de la carpeta datos. Los nombres de los ficheros generados deben contener la fecha.</p>

<p><strong>Copia completa :</strong></p>

<p>#!/bin/bash</p>

<p>DATE=$(date +%Y-%m-%d-%H%M%S) BACKUP_DIR=”/home/javiercruces/copias/” SOURCE=”/home/javiercruces/datos/”</p>

<p>tar -cvzpf $BACKUP_DIR/backup-$DATE.tar.gz $SOURCE</p>

<p><strong>Copia incremental :</strong></p>

<p>#!/bin/bash BACKUP_DIR=”/home/javiercruces/copias/” ROTATE_DIR=”/ carpetadestino /backup/rotate” TIMESTAMP=”timestamp.dat” SOURCE=”/home/javiercruces/datos/” DATE=$(date +%Y-%m-%d-%H%M%S)</p>

<p>EXCLUDE=”–exclude=/mnt/* –exclude=/proc/* –exclude=/sys/* –exclude=/tmp/*” cd /</p>

<p>mkdir -p ${BACKUP_DIR}</p>

<p>set – ${BACKUP_DIR}/backup-??.tar.gz lastname=${!#} backupnr=${lastname##*backup-} backupnr=${backupnr%%.*} backupnr=${backupnr//\?/0} backupnr=$[10#${backupnr}]</p>

<p>if [ “$[backupnr++]” -ge 30 ]; then</p>

<p>mkdir -p ${ROTATE_DIR}/${DATE}</p>

<p>mv ${BACKUP_DIR}/b* ${ROTATE_DIR}/${DATE} mv ${BACKUP_DIR}/t* ${ROTATE_DIR}/${DATE} backupnr=1</p>

<p>fi</p>

<p>backupnr=0${backupnr} backupnr=${backupnr: -2} filename=backup-${backupnr}.tar.gz</p>

<p>tar -cpzf ${BACKUP_DIR}/${filename} -g ${BACKUP_DIR}/${TIMESTAMP} -X $EXCLUDE ${SOURCE]</p>

<p><strong>Copia diferencial :</strong></p>

<p>#!/bin/bash</p>

<p>echo introduce la fecha de la ultima copia</p>

<p>read fecha</p>

<p>tar -cpvzf “copiadiferencial_<code class="language-plaintext highlighter-rouge">date +%d%m%Y</code>.tar” datos/ -N $fecha</p>

<p>Deberemos de darle permisos de ejecución a los scrpits con chmod +x nombredescript</p>

<p><strong>Ejercicio 2</strong></p>

<p>Explica el funcionamiento de cron y documenta cómo lo utilizaríamos para automatizar el proceso de copia de seguridad según el siguiente esquema:</p>

<p>Cron es un administrador de tareas de Linux que permite ejecutar comandos en un momento determinado, por ejemplo, cada minuto, día, semana o mes. Si queremos trabajar con cron, podemos hacerlo a través del comando crontab.</p>

<p>Para configurar nuestras copias elegiremos la primera opción:</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.047.png" alt="" /></p>

<p>Ahora ponemos las siguientes lineas , deberemos poner primero cuando queremos que se ejecute el scrpit y después la ruta de donde se encuentra .</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.048.png" alt="" /></p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.049.png" alt="" /></p>

<p><strong>Copias de seguridad en Linux con programas de terceros</strong></p>

<p>Me descargare el programa Gadmin-Rsync desde el centro de software ya que he visto que me permite programar copias y ademas seleccionar el tipo de la misma cosa que otros programas no me permitían .</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.050.png" alt="" /></p>

<p>La primera vez que lo lancemos nos pedirá la contraseña de root:</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.051.png" alt="" /></p>

<p>Ahora creamos una copia completa</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.052.png" alt="" /></p>

<p>Nos preguntara donde queremos guardarla , le daremos a copia local :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.053.png" alt="" /></p>

<p>Seleccionamos el directorio que queremos hacerle las copias</p>

<p>Ahora seleccionamos donde se guardaran las mismas</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.054.png" alt="" /></p>

<p>Vamos a hacer una copia completa manualmente para eso pulsamos sobre nuestra configuración  y al botón de run selected backup</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.055.png" alt="" /></p>

<p>Tenemos un apartado para ver el progreso del mismo :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.056.png" alt="" /></p>

<p>Ahora vamos a programar las horas y las copias para automatizarlas :</p>

<p>Antes de esto deberemos de crear la copia diferencial y incremental como hemos creado antes la completa  . Ahora seleccionamos arriba la copia nos desplazamos abajo y seleccionamos las horas y días que se realizaran</p>

<p>La programación de la diferencial :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.057.png" alt="" /><img src="Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.058.png" alt="" /></p>

<p>Y por ultimo la copia incremental :</p>

<p><img src="/assets/images/seguridad/copiasseguridadlinux/Aspose.Words.a5ea697f-26fc-496e-b5ca-3341b4f207fa.059.png" alt="" /></p>

<p>Este software da muchas ventajas a personas que no tienen conocimientos sobre el tema ya que el programa es muy intuitivo . Sin embargo la clara desventaja es que al ser dedicado al gran publico perdemos muchas opciones de personalización que nos permite un scrpit por ejemplo .</p>

